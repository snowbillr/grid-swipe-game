!function(e){function t(t){for(var i,o,a=t[0],u=t[1],c=t[2],h=0,f=[];h<a.length;h++)o=a[h],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);for(l&&l(t);f.length;)f.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,a=1;a<n.length;a++){var u=n[a];0!==r[u]&&(i=!1)}i&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={0:0},s=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var a=window.webpackJsonp=window.webpackJsonp||[],u=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var l=u;s.push([1463,1]),n()}({1463:function(e,t,n){"use strict";n.r(t);var i,r=n(3),s=n.n(r),o=n(5),a=n.n(o),u=n(24),c=n.n(u),l=n(25),h=n.n(l),f=n(11),d=n.n(f),v=n(43),p=n.n(v),g=n(553),y=n(88),m=n.n(y);!function(e){e.UP="UP",e.DOWN="DOWN",e.LEFT="LEFT",e.RIGHT="RIGHT"}(i||(i={}));var k=function(){function e(t,n,i){s()(this,e),this.dungeon=t,this.x=n,this.y=i,this.initialX=void 0,this.initialY=void 0,this.initialX=n,this.initialY=i}return a()(e,[{key:"move",value:function(e){switch(e){case i.UP:this.up();break;case i.DOWN:this.down();break;case i.LEFT:this.left();break;case i.RIGHT:this.right()}return this.exists()}},{key:"up",value:function(){return this.y-=1,this.exists()}},{key:"down",value:function(){return this.y+=1,this.exists()}},{key:"left",value:function(){return this.x-=1,this.exists()}},{key:"right",value:function(){return this.x+=1,this.exists()}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this.exists()}},{key:"reset",value:function(){this.x=this.initialX,this.y=this.initialY}},{key:"exists",value:function(){return this.dungeon.hasTile(this.x,this.y)}},{key:"getTile",value:function(){return this.dungeon.getTile(this.x,this.y)}}]),e}(),P=function(){function e(t,n,i,r){s()(this,e),this.dungeonTiles=t,this.markers=n,this.floor=i,this.worldWidth=void 0,this.worldHeight=void 0,this.gridWidth=void 0,this.gridHeight=void 0,this.worldWidth=r.widthInPixels,this.worldHeight=r.heightInPixels,this.gridWidth=r.width,this.gridHeight=r.height}return a()(e,[{key:"destroy",value:function(){this.dungeonTiles.forEach((function(e){return e.destroy()})),delete this.dungeonTiles,delete this.markers,this.floor.destroy(),delete this.floor}},{key:"getMarker",value:function(e){return this.markers[e]}},{key:"getCursor",value:function(e,t){return new k(this,e,t)}},{key:"hasTile",value:function(e,t){return this.dungeonTiles.some((function(n){return n.isGridPosition(e,t)}))}},{key:"getTile",value:function(e,t){var n=this.dungeonTiles.find((function(n){return n.isGridPosition(e,t)}));if(!n)throw new Error("No tile found for ".concat(e,", ").concat(t));return n}},{key:"getWalkableNeighborTile",value:function(e,t,n){var i=this.getCursor(e,t);if(i.move(n),i.exists()){var r=i.getTile();return r.isWalkable()?r:void 0}}}]),e}(),b=function e(t,n,i,r,o){s()(this,e),this.name=t,this.gridX=n,this.gridY=i,this.worldX=r,this.worldY=o},T=function(){function e(t,n,i,r,o,a){s()(this,e),this.gridX=t,this.gridY=n,this.worldX=i,this.worldY=r,this.properties=o,this.objects=a,this.inputBehaviors=void 0,this.inputBehaviors=[]}return a()(e,[{key:"destroy",value:function(){delete this.properties,this.objects.forEach((function(e){return e.destroy()})),this.inputBehaviors=[],delete this.inputBehaviors}},{key:"getObject",value:function(e){return this.objects.find((function(t){return t.name===e}))}},{key:"isWalkable",value:function(){return this.properties.walkable}},{key:"isObjective",value:function(){return this.properties.objective}},{key:"isGridPosition",value:function(e,t){return e===this.gridX&&t===this.gridY}},{key:"addInputBehavior",value:function(e){this.inputBehaviors.push(e)}}]),e}(),x=function(){function e(t,n){var i,r;s()(this,e),this.scene=void 0,this.x=void 0,this.y=void 0,this.texture=void 0,this.depth=void 0,this.originX=void 0,this.originY=void 0,this.sprite=void 0,this.scene=t,this.x=n.x,this.y=n.y,this.texture=n.texture,this.depth=n.depth,this.originX=null!==(i=n.originX)&&void 0!==i?i:.5,this.originY=null!==(r=n.originY)&&void 0!==r?r:.5}return a()(e,[{key:"onAdd",value:function(){this.sprite=this.scene.add.sprite(this.x,this.y,this.texture),this.sprite.setDepth(this.depth),this.sprite.setOrigin(this.originX,this.originY)}},{key:"destroy",value:function(){}}]),e}(),w=function(){function e(t,n){s()(this,e),this.gridX=void 0,this.gridY=void 0,this.gridX=n.gridX,this.gridY=n.gridY}return a()(e,[{key:"setGridPosition",value:function(e,t){this.gridX=e,this.gridY=t}},{key:"destroy",value:function(){}}]),e}(),E=n(554),O=function(){function e(t,n,i){s()(this,e),this.scene=void 0,this.data=void 0,this.entity=void 0,this.stateMachine=void 0,this.scene=t,this.data=n,this.entity=i}return a()(e,[{key:"onAdd",value:function(){var e=this;this.stateMachine=new E.a(this.scene,this.entity,this.data.states,this.data.initialState),this.stateMachine.start(),this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE,(function(){return e.updateStateMachine}))}},{key:"destroy",value:function(){var e=this;this.scene.events.off(Phaser.Scenes.Events.POST_UPDATE,(function(){return e.updateStateMachine}))}},{key:"updateStateMachine",value:function(){this.stateMachine.update()}}]),e}(),R=function(e,t,n,r){for(var s=e.getComponent(x).sprite,o=e.getComponent(w),a=new Phaser.Math.Vector2(o.gridX,o.gridY),u=n.getCursor(a.x,a.y).move(t),c=r.tweens.timeline({tweens:[{targets:[],duration:0}],paused:!0,onStart:function(){e.getComponent(O).stateMachine.doTransition({to:"moving",onTransition:function(e){var n=e.getComponent(x).sprite;t===i.LEFT?n.flipX=!0:t===i.RIGHT&&(n.flipX=!1)}})},onComplete:function(){e.getComponent(O).stateMachine.doTransition({to:"idle"})}}),l=function(){var e=n.getWalkableNeighborTile(a.x,a.y,t);if(e){var i=new Phaser.Math.Vector2(e.worldX,e.worldY);c.add({targets:s,props:{x:i.x,y:i.y},duration:200,onComplete:function(){o.setGridPosition(e.gridX,e.gridY)}}),a.set(e.gridX,e.gridY)}else u=!1};u;)l();return c},D=[{isApplicable:function(e,t){return e.isWalkable()},run:function(e,t,n){R(n.hero,e,n.dungeon,n).play()}},{isApplicable:function(e,t){var n=t.getCursor(e.gridX,e.gridY),i=!1;return n.right()&&(i=i||n.getTile().isObjective()),n.reset(),n.left()&&(i=i||n.getTile().isObjective()),n.reset(),n.up()&&(i=i||n.getTile().isObjective()),n.reset(),n.down()&&(i=i||n.getTile().isObjective()),i},run:function(e,t,n){var i,r=n.dungeon.getCursor(t.gridX,t.gridY);if(r.move(e),r.getTile().isObjective()){var s=null===(i=r.getTile().getObject("objective"))||void 0===i?void 0:i.sprite,o=new Promise((function(e){null==s||s.once(Phaser.Animations.Events.SPRITE_ANIMATION_COMPLETE,e)}));n.sfx.pauseLevelMusic(),null==s||s.anims.play("objective-win"),Promise.all([o,n.sfx.playWinSfx()]).then((function(){n.levelManager.hasNextLevel()?(n.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,(function(){n.persistence.getDocument("progress").lastCompletedLevelNumber=n.levelManager.getCurrentLevelNumber(),n.persistence.store(),n.levelManager.setCurrentLevelNumber(n.levelManager.getCurrentLevelNumber()+1),n.scene.restart()})),n.cameras.main.fadeOut(700)):console.log("beat all the levels")}))}}}],S=function(){function e(){s()(this,e)}return a()(e,[{key:"create",value:function(e,t,n,i,r){var s={walkable:r.walkable.reduce((function(e,t){return e&&t}),!0),objective:r.objective.reduce((function(e,t){return e||t}),!1)};return new T(e,t,n,i,s,r.objects||[])}},{key:"process",value:function(e,t){D.forEach((function(n){n.isApplicable(e,t)&&e.addInputBehavior(n)}))}}]),e}(),N=function(){function e(t,n){s()(this,e),this.name=t,this.sprite=n}return a()(e,[{key:"destroy",value:function(){this.sprite.destroy()}}]),e}(),M={85:"objective",50:"rock"},j={85:0},I={85:"objective",50:"rock"},C=function(){function e(t){s()(this,e),this.scene=t}return a()(e,[{key:"create",value:function(e,t,n){var i=M[n],r=j[n],s=this.scene.add.sprite(e,t,i,r).setOrigin(0);return new N(I[n],s)}}]),e}(),L=function(){function e(t){s()(this,e),this.scene=t,this.dungeonTileFactory=void 0,this.dungeonObjectFactory=void 0,this.dungeonTileFactory=new S,this.dungeonObjectFactory=new C(t)}return a()(e,[{key:"createDungeon",value:function(e,t,n){var i=this,r=this.scene.add.tilemap(e);r.addTilesetImage("dungeon-tileset","dungeon-spritesheet");var s=this.createFloor(r,t,n);r.setLayer("floor");var o=this.createDungeonTiles(r,s),a=this.createDungeonMarkers(r,t,n),u=new P(o,a,s,r);return o.forEach((function(e){return i.dungeonTileFactory.process(e,u)})),u}},{key:"createFloor",value:function(e,t,n){return e.createDynamicLayer("floor","dungeon-tileset",t,n)}},{key:"createDungeonTiles",value:function(e,t){var n=this,i=new X;t.forEachTile((function(e){Object.entries(e.properties).forEach((function(t){var n=m()(t,2),r=n[0],s=n[1];i.addKeyValue(e.x,e.y,r,s)}))}),this,0,0,e.width,e.height,{isNotEmpty:!0}),e.getLayer("objects").data.flat().filter((function(e){return-1!==e.index})).forEach((function(t){var r=e.tileToWorldXY(t.x,t.y),s=n.dungeonObjectFactory.create(r.x,r.y,t.index);i.addKeyValue(t.x,t.y,"objects",s),Object.entries(t.properties).forEach((function(e){var n=m()(e,2),r=n[0],s=n[1];i.addKeyValue(t.x,t.y,r,s)}))}));var r=[];return i.forEach((function(t,i){var s=e.tileToWorldXY(t.x,t.y),o=n.dungeonTileFactory.create(t.x,t.y,s.x,s.y,i);r.push(o)})),r}},{key:"createDungeonMarkers",value:function(e,t,n){return e.getObjectLayer("markers").objects.reduce((function(i,r){var s=e.getTileAtWorldXY(r.x+t,r.y+n),o=e.tileToWorldXY(s.x,s.y);return i[r.name]=new b(r.name,s.x,s.y,o.x,o.y),i}),{})}}]),e}(),X=function(){function e(){s()(this,e),this.tileData=void 0,this.tileData={}}return a()(e,[{key:"addKeyValue",value:function(e,t,n,i){var r,s,o=this.coordinatesToTileKey(e,t);this.tileData[o]=null!==(r=this.tileData[o])&&void 0!==r?r:{},this.tileData[o][n]=null!==(s=this.tileData[o][n])&&void 0!==s?s:[],this.tileData[o][n].push(i)}},{key:"forEach",value:function(e){var t=this;Object.entries(this.tileData).forEach((function(n){var i=m()(n,2),r=i[0],s=i[1],o=t.tileKeyToCoordinates(r);e(o,s)}))}},{key:"coordinatesToTileKey",value:function(e,t){return"".concat(e,",").concat(t)}},{key:"tileKeyToCoordinates",value:function(e){var t=e.split(",").map(Number),n=m()(t,2);return{x:n[0],y:n[1]}}}]),e}(),Y=[{id:"idle",transitions:[],onEnter:function(e){e.getComponent(x).sprite.anims.play("hero-idle")}},{id:"moving",transitions:[],onEnter:function(e){e.getComponent(x).sprite.anims.play("hero-run")}}],W={components:[{component:x,data:{texture:"hero",depth:50,originX:0,originY:.5}},w,{component:O,data:{states:Y,initialState:Y[0]}}]},H={WIDTH:342,HEIGHT:608};function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var F=function(e){c()(n,e);var t=_(n);function n(){var e;s()(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).persistence=void 0,e.phecs=void 0,e.levelManager=void 0,e.swipe=void 0,e}return a()(n,[{key:"sfx",get:function(){return this.scene.get("music")}}]),n}(Phaser.Scene);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var B=function(e){c()(n,e);var t=A(n);function n(){var e;return s()(this,n),(e=t.call(this,{key:"dungeon"})).dungeon=void 0,e.hero=void 0,e}return a()(n,[{key:"init",value:function(){this.phecs.register.prefab("hero",W)}},{key:"create",value:function(){var e=this;this.add.image(this.scale.width-40,this.scale.height-40,"hud-restart").setScrollFactor(0).setInteractive().on(Phaser.Input.Events.POINTER_DOWN,(function(){e.sfx.pauseLevelMusic(),e.sfx.playResetSfx(),e.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,(function(){e.scene.restart()})),e.cameras.main.fadeOut(1e3)}));var t=new L(this);this.dungeon=t.createDungeon(this.levelManager.getCurrentLevelKey(),0,0);var n=this.dungeon.getMarker("hero-start");this.hero=this.phecs.add.prefab("hero",{gridX:n.gridX,gridY:n.gridY},n.worldX,n.worldY),this.swipe.addListener((function(t){e.handleInput(t)}));var i=this.calculateCameraBounds(),r=i.x,s=i.y,o=i.width,a=i.height;this.cameras.main.setBounds(r,s,o,a),this.cameras.main.setBackgroundColor(2429722),this.cameras.main.startFollow(this.hero.getComponent(x).sprite),this.cameras.main.fadeIn(500),this.sfx.playLevelMusic()}},{key:"handleInput",value:function(e){var t=this;if("moving"!==this.hero.getComponent(O).stateMachine.currentState.id){var n=this.hero.getComponent(w),i=this.dungeon.getCursor(n.gridX,n.gridY).getTile();i.inputBehaviors.forEach((function(n){return n.run(e,i,t)}))}}},{key:"calculateCameraBounds",value:function(){var e=0,t=0,n=this.dungeon.worldWidth,i=this.dungeon.worldHeight;return n<H.WIDTH&&(e-=(H.WIDTH-n)/2),i<H.HEIGHT&&(t-=(H.HEIGHT-i)/2),{x:e,y:t,width:n,height:i}}}]),n}(F);function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var U=Array.from({length:3},(function(e,t){return t+1})).reduce((function(e,t){var n=String(t).padStart(3,"0");return e[t]="level-".concat(n),e}),{}),K=function(e){c()(n,e);var t=G(n);function n(e){var i;return s()(this,n),(i=t.call(this,e)).levelNumber=void 0,i.levelNumber=0,i}return a()(n,[{key:"setCurrentLevelNumber",value:function(e){this.levelNumber=e}},{key:"getCurrentLevelNumber",value:function(){return this.levelNumber}},{key:"hasNextLevel",value:function(){return this.hasLevel(this.levelNumber+1)}},{key:"hasLevel",value:function(e){return Boolean(U[null!=e?e:this.levelNumber])}},{key:"getCurrentLevelKey",value:function(){return U[this.levelNumber]}}]),n}(Phaser.Plugins.BasePlugin);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var V=function(e){c()(n,e);var t=J(n);function n(){return s()(this,n),t.call(this,{key:"preload"})}return a()(n,[{key:"preload",value:function(){this.load.audio("coin",["assets/sfx/coin.mp3","assets/sfx/coin.ogg"]),this.load.audio("die",["assets/sfx/die.mp3","assets/sfx/die.ogg"]),this.load.audio("level-complete",["assets/sfx/level-complete.mp3","assets/sfx/level-complete.ogg"]),this.load.audio("level-reset",["assets/sfx/level-reset.mp3","assets/sfx/level-reset.ogg"]),this.load.audio("level-music",["assets/music/level-music.mp3","assets/music/level-music.ogg"]),this.load.audio("level-complete-music",["assets/music/level-complete-music.mp3","assets/music/level-complete-music.ogg"]),this.load.image("logo","assets/logo/scooch-dungeon-logo.png"),this.load.bitmapFont("matchup-64","assets/fonts/matchup-64.png","assets/fonts/matchup-64.xml"),this.load.image("hud-restart","assets/images/hud-restart.png"),this.load.image("dungeon-spritesheet","assets/maps/dungeon-spritesheet.png"),this.load.spritesheet("objective","assets/objects/objective.png",{frameWidth:32,frameHeight:32}),this.load.animation("objective-animations","assets/objects/objective-animations.json"),this.load.image("rock","assets/objects/rock.png");for(var e=1;e<=3;e++){var t=String(e).padStart(3,"0");this.load.tilemapTiledJSON("level-".concat(t),"assets/levels/".concat(t,".json"))}this.load.spritesheet("hero","assets/characters/hero/spritesheet.png",{frameWidth:32,frameHeight:56}),this.load.animation("hero-animations","assets/characters/hero/animations.json")}},{key:"create",value:function(){this.persistence.read(),this.scene.start("title")}}]),n}(F);function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var z=function(e){c()(n,e);var t=Q(n);function n(){return s()(this,n),t.call(this,{key:"title"})}return a()(n,[{key:"create",value:function(){var e=this;this.cameras.main.setBackgroundColor(4007227);var t=this.add.image(-300,100,"logo").setScale(.6),n=0===this.persistence.getDocument("progress").lastCompletedLevelNumber?"PLAY":"CONTINUE",i=this.addButton(this.cameras.main.centerX,H.HEIGHT+100,n,(function(){e.levelManager.setCurrentLevelNumber(e.persistence.getDocument("progress").lastCompletedLevelNumber+1),e.scene.launch("music"),e.scene.start("dungeon")}));this.tweens.timeline({tweens:[{targets:t,props:{x:this.cameras.main.centerX},ease:Phaser.Math.Easing.Quadratic.Out,duration:750},{targets:i,props:{y:300},offset:300,ease:Phaser.Math.Easing.Quadratic.Out,duration:550}]})}},{key:"addButton",value:function(e,t,n,i){var r=this.add.container(e,t).setSize(240,80).setInteractive().on(Phaser.Input.Events.POINTER_DOWN,i),s=this.add.rectangle(0,0,240,80,14306872).setOrigin(.5),o=this.add.rectangle(0,0,230,70,15633710).setOrigin(.5),a=this.add.bitmapText(0,-5,"matchup-64",n).setOrigin(.5);return r.add(s),r.add(o),r.add(a),r}}]),n}(F);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var q=function(e){c()(n,e);var t=Z(n);function n(e){var i;return s()(this,n),(i=t.call(this,e)).documents=void 0,i.documents=[],i}return a()(n,[{key:"addDocument",value:function(e){this.documents.push(e)}},{key:"getDocument",value:function(e){var t=this.documents.find((function(t){return t.name===e}));if(!t)throw new Error("No persistence document found: ".concat(e));return t}},{key:"store",value:function(){var e=this.documents.reduce((function(e,t){return e[t.name]=t.toJson(),e}),{});window.localStorage.setItem("scooch-dungeon",JSON.stringify(e))}},{key:"read",value:function(){var e=this,t=window.localStorage.getItem("scooch-dungeon")||"{}",n=JSON.parse(t);Object.entries(n).forEach((function(t){var n=m()(t,2),i=n[0],r=n[1],s=e.documents.find((function(e){return e.name===i}));null==s||s.fromJson(r)}))}}]),n}(Phaser.Plugins.BasePlugin),$=function(){function e(){s()(this,e),this.name="progress",this.lastCompletedLevelNumber=0}return a()(e,[{key:"toJson",value:function(){return{levelNumber:this.lastCompletedLevelNumber}}},{key:"fromJson",value:function(e){this.lastCompletedLevelNumber=e.levelNumber}}]),e}();function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var te=function(e){c()(n,e);var t=ee(n);function n(){return s()(this,n),t.call(this,{key:"boot"})}return a()(n,[{key:"create",value:function(){this.persistence.addDocument(new $),this.scene.start("preload")}}]),n}(F),ne=n(168),ie=n.n(ne);function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var se=function(e){c()(n,e);var t=re(n);function n(e,i){var r;return s()(this,n),(r=t.call(this,e,i)).listeners=void 0,r.hasSwiped=void 0,r.listeners=[],r.hasSwiped=!1,e.events.on(Phaser.Scenes.Events.START,r.startListening,ie()(r)),e.events.on(Phaser.Scenes.Events.SHUTDOWN,r.stopListening,ie()(r)),r}return a()(n,[{key:"addListener",value:function(e){this.listeners.push(e)}},{key:"startListening",value:function(){this.scene.input.on(Phaser.Input.Events.POINTER_DOWN,this.onPointerDown,this),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onPointerUp,this),this.scene.input.on(Phaser.Input.Events.POINTER_MOVE,this.onPointerMove,this)}},{key:"stopListening",value:function(){this.listeners=[],this.scene.input.off(Phaser.Input.Events.POINTER_DOWN,this.onPointerDown,this),this.scene.input.off(Phaser.Input.Events.POINTER_UP,this.onPointerUp,this),this.scene.input.off(Phaser.Input.Events.POINTER_MOVE,this.onPointerMove,this)}},{key:"onPointerDown",value:function(){this.hasSwiped=!1}},{key:"onPointerUp",value:function(){this.hasSwiped=!0}},{key:"onPointerMove",value:function(){if(this.scene.input.activePointer.isDown){var e=this.scene.input.activePointer.getDistanceX(),t=this.scene.input.activePointer.getDistanceY(),n=void 0;if(e>100){var r=this.scene.input.activePointer.position.x-this.scene.input.activePointer.prevPosition.x;n=r<0?i.LEFT:i.RIGHT}else if(t>100){var s=this.scene.input.activePointer.position.y-this.scene.input.activePointer.prevPosition.y;n=s<0?i.UP:i.DOWN}n&&!this.hasSwiped&&(this.hasSwiped=!0,this.listeners.forEach((function(e){return e(n)})))}}}]),n}(Phaser.Plugins.ScenePlugin);function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var ae=function(e){c()(n,e);var t=oe(n);function n(){var e;return s()(this,n),(e=t.call(this,{key:"music"})).levelMusic=void 0,e}return a()(n,[{key:"init",value:function(){this.events.on(Phaser.Scenes.Events.SHUTDOWN,this.destroy,this)}},{key:"create",value:function(){this.levelMusic=this.sound.add("level-music",{loop:!0})}},{key:"destroy",value:function(){this.levelMusic.destroy()}},{key:"playLevelMusic",value:function(){this.levelMusic.isPlaying||(this.levelMusic.isPaused?this.levelMusic.resume():this.levelMusic.play())}},{key:"pauseLevelMusic",value:function(){this.levelMusic.pause()}},{key:"playWinSfx",value:function(){var e=this.sound.add("level-complete");return e.play(),new Promise((function(t){e.once(Phaser.Sound.Events.COMPLETE,(function(){e.destroy(),t()}))}))}},{key:"playResetSfx",value:function(){this.sound.play("level-reset")}}]),n}(F);function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}p.a.Scene;var ce=[te,V,z,B,ae];new p.a.Game({width:H.WIDTH,height:H.HEIGHT,scene:ce,scale:{mode:p.a.Scale.FIT,autoCenter:p.a.Scale.CENTER_HORIZONTALLY},render:{pixelArt:!0},plugins:{scene:[{key:"Phecs",plugin:g.a,mapping:"phecs"},{key:"Swipe",plugin:se,mapping:"swipe"}],global:[{key:"LevelManagerPlugin",plugin:K,mapping:"levelManager",start:!0},{key:"PersistencePlugin",plugin:q,mapping:"persistence",start:!0}]}})}});